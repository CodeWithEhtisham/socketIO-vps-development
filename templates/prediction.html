<!DOCTYPE html>
<html lang="en">

<head>
  <style>
    table {
      font-family: arial, sans-serif;
      border-collapse: collapse;
      width: 100%;
    }

    td,
    th {
      border: none;
      text-align: left;
      padding: 8px;
    }

    tr:nth-child(even) {
      background-color: #dddddd;
    }
  </style>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>SVC and AS</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->

  <!-- Theme style -->
  <link rel="stylesheet" href="static/css/adminlte.min.css">
</head>

<body class="hold-transition sidebar-mini">
  <div id="count_check"></div>
  <div class="wrapper">
    <!-- Navbar -->
    <nav class="main-header navbar navbar-expand navbar-white navbar-light">
      <!-- Left navbar links -->
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
        </li>
        <li class="nav-item d-none d-sm-inline-block">
          <a href="#" class="nav-link">
            <span class="badge badge-warning " style="background-color:rgb(144,210,250); font-size: medium;">Home</span>
          </a>
        </li>
        <li class="nav-item d-none d-sm-inline-block">
          <!-- <a href="#" class="nav-link">Contact</a> -->
        </li>
      </ul>

      <!-- Right navbar links -->
      <ul class="navbar-nav ml-auto">
        <!-- Navbar Search -->
        <li class="nav-item">
          <a class="nav-link" data-widget="navbar-search" href="#" role="button">
            <i class="fas fa-search"></i>
          </a>
          <div class="navbar-search-block">
            <form class="form-inline">
              <div class="input-group input-group-sm">
                <input class="form-control form-control-navbar" type="search" placeholder="Search" aria-label="Search">
                <div class="input-group-append">
                  <button class="btn btn-navbar" type="submit">
                    <i class="fas fa-search"></i>
                  </button>
                  <button class="btn btn-navbar" type="button" data-widget="navbar-search">
                    <i class="fas fa-times"></i>
                  </button>
                </div>
              </div>
            </form>
          </div>
        </li>

        <!-- Messages Dropdown Menu -->
        <!-- <li class="nav-item dropdown">
          <a class="nav-link" data-toggle="dropdown" href="#">
            <i class="far fa-comments"></i>
            <span class="badge badge-danger navbar-badge">3</span>
          </a>
          <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
            <a href="#" class="dropdown-item">
              Message Start
              <div class="media">
                <img src="static/img/user1-128x128.jpg" alt="User Avatar" class="img-size-50 mr-3 img-circle">
                <div class="media-body">
                  <h3 class="dropdown-item-title">
                    Brad Diesel
                    <span class="float-right text-sm text-danger"><i class="fas fa-star"></i></span>
                  </h3>
                  <p class="text-sm">Call me whenever you can...</p>
                  <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
                </div>
              </div>
              Message End
            </a>
            <div class="dropdown-divider"></div>
            <a href="#" class="dropdown-item">
              Message Start
              <div class="media">
                <img src="static/img/user8-128x128.jpg" alt="User Avatar" class="img-size-50 img-circle mr-3">
                <div class="media-body">
                  <h3 class="dropdown-item-title">
                    John Pierce
                    <span class="float-right text-sm text-muted"><i class="fas fa-star"></i></span>
                  </h3>
                  <p class="text-sm">I got your message bro</p>
                  <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
                </div>
              </div>
              Message End
            </a>
            <div class="dropdown-divider"></div>
            <a href="#" class="dropdown-item">
              Message Start
              <div class="media">
                <img src="static/img/user3-128x128.jpg" alt="User Avatar" class="img-size-50 img-circle mr-3">
                <div class="media-body">
                  <h3 class="dropdown-item-title">
                    Nora Silvester
                    <span class="float-right text-sm text-warning"><i class="fas fa-star"></i></span>
                  </h3>
                  <p class="text-sm">The subject goes here</p>
                  <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
                </div>
              </div>
              Message End
              
            </a>
            <div class="dropdown-divider"></div>
            <a href="#" class="dropdown-item dropdown-footer">See All Messages</a>
          </div>
        </li> -->
        <!-- Notifications Dropdown Menu -->
        <li class="nav-item dropdown">
          <a href="{{ url_for('history') }}">
            <!-- <i class="far fa-bell"></i> -->
            <span class="badge badge-warning navbar-badge"
              style="background-color:rgb(144,210,250); font-size: medium;">History</span>
          </a>
        </li>
        <!-- <li class="nav-item dropdown">
          <a class="nav-link" data-toggle="dropdown" href="#">
            <i class="far fa-bell"></i>
            <span class="badge badge-warning navbar-badge">15</span>
          </a>
          <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
            <span class="dropdown-item dropdown-header">15 Notifications</span>
            <div class="dropdown-divider"></div>
            <a href="#" class="dropdown-item">
              <i class="fas fa-envelope mr-2"></i> 4 new messages
              <span class="float-right text-muted text-sm">3 mins</span>
            </a>
            <div class="dropdown-divider"></div>
            <a href="#" class="dropdown-item">
              <i class="fas fa-users mr-2"></i> 8 friend requests
              <span class="float-right text-muted text-sm">12 hours</span>
            </a>
            <div class="dropdown-divider"></div>
            <a href="#" class="dropdown-item">
              <i class="fas fa-file mr-2"></i> 3 new reports
              <span class="float-right text-muted text-sm">2 days</span>
            </a>
            <div class="dropdown-divider"></div>
            <a href="#" class="dropdown-item dropdown-footer">See All Notifications</a>
          </div>
        </li> -->
        <li class="nav-item">
          <a class="nav-link" data-widget="fullscreen" href="#" role="button">
            <i class="fas fa-expand-arrows-alt"></i>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" data-widget="control-sidebar" data-slide="true" href="#" role="button">
            <i class="fas fa-th-large"></i>
          </a>
        </li>
      </ul>
    </nav>
    <!-- /.navbar -->

    <!-- Main Sidebar Container -->
    <aside class="main-sidebar sidebar-dark-primary elevation-4">
      <!-- Brand Logo -->
      <a href="#" class="brand-link">
        <img src="static/img/AdminLTELogo.png" alt="AdminLTE Logo" class="brand-image img-circle elevation-3"
          style="opacity: .8">
        <span class="brand-text font-weight-light">Smart Vehicle</span>
      </a>

      <!-- Sidebar -->
      <div class="sidebar">
        <!-- Sidebar user panel (optional) -->
        <div class="user-panel mt-3 pb-3 mb-3 d-flex">
          <div class="image">
            <img src="static/img/user2-160x160.jpg" class="img-circle elevation-2" alt="User Image">
          </div>
          <div class="info">
            <a href="#" class="d-block">Admin Panel</a>
          </div>
        </div>

        <!-- SidebarSearch Form -->
        <div class="form-inline">
          <div class="input-group" data-widget="sidebar-search">
            <input class="form-control form-control-sidebar" type="search" placeholder="Search" aria-label="Search">
            <div class="input-group-append">
              <button class="btn btn-sidebar">
                <i class="fas fa-search fa-fw"></i>
              </button>
            </div>
            <!-- Smart Vehicle -->
          </div>

          <!-- Sidebar Menu -->
          <nav class="mt-2">
            <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
              <!-- Add icons to the links using the .nav-icon class
               with font-awesome or any other icon font library -->



              <li class="nav-item menu-open">
                <a href="#" class="nav-link active">
                  <i class="nav-icon fas fa-chart-pie"></i>
                  <p>
                    Locations
                    <i class="right fas fa-angle-left"></i>
                  </p>
                </a>
                <ul class="nav nav-treeview">
                  <li class="nav-item">
                    <a href="#" class="nav-link">
                      <i class="far fa-circle nav-icon"></i>
                      <p>Sirki Road</p>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a href="{{url_for('index')}}" class="nav-link active">
                      <i class="far fa-circle nav-icon"></i>
                      <p>UOB</p>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a href="#" class="nav-link">
                      <i class="far fa-circle nav-icon"></i>
                      <p>Meezan chowk</p>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a href="#" class="nav-link">
                      <i class="far fa-circle nav-icon"></i>
                      <p>Airport Road</p>
                    </a>
                  </li>
                </ul>
              </li>




            </ul>
          </nav>
          <!-- /.sidebar-menu -->
        </div>
        <!-- /.sidebar -->
    </aside>

    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
      <!-- Content Header (Page header) -->
      <section class="content-header">
        <div class="container-fluid">
          <div class="row mb-2">
            <div class="col-sm-6">
              <h1>Traffic Analytics</h1>
            </div>
            <div class="col-sm-6">
              <ol class="breadcrumb float-sm-right">
                <!-- <li class="breadcrumb-item"><a href="#">Home</a></li> -->
                <!-- <li class="breadcrumb-item active">Flot</li> -->
              </ol>
            </div>
          </div>
        </div><!-- /.container-fluid -->
      </section>

      <!-- Main content -->
      <section class="content">
        <div class="container-fluid">
          <div class="row">
            <div class="col-md-8">
              <!-- interactive chart -->
              <div class="card card-primary card-outline">
                <div class="card-header">
                  <h3 class="card-title">
                    <i class="far fa-chart-bar"></i>
                    predicted Image
                  </h3>


                  <div class="card-tools">
                    Real time
                    <!-- <div class="btn-group" id="realtime" data-toggle="btn-toggle">
                    <button type="button" class="btn btn-default btn-sm active" data-toggle="on">On</button>
                    <button type="button" class="btn btn-default btn-sm" data-toggle="off">Off</button>
                  </div> -->
                  </div>
                </div>
                <div class="card-body">
                  <img style="width: 100%;height: 390px;" id="myImage" ,src='/static/img/output.jpg'>
                </div>
                <!-- /.card-body-->
              </div>
              <!-- /.card -->

            </div>
            <div class="col-md-4">
              <div class="card card-primary card-outline">
                <div class="card-header">
                  <h3 class="card-title">
                    <i class="far fa-chart-bar"></i>
                    Detected Vehicles
                  </h3>

                  <div class="card-tools">
                    <button type="button" class="btn btn-tool" data-card-widget="collapse">
                      <i class="fas fa-minus"></i>
                    </button>
                    <button type="button" class="btn btn-tool" data-card-widget="remove">
                      <i class="fas fa-times"></i>
                    </button>
                  </div>
                </div>
                <div class="card-body">
                  <div style="height: 300px;">
                    <!-- table create -->
                    <table>
                      <tr>
                        <th>Vehicle Type</th>
                        <th>Count</th>
                      </tr>
                      <tr>
                        <td>Car</td>
                        <td><span id="car"></span></td>
                      </tr>
                      <tr>
                        <td>bus</td>
                        <td><span id="bus"></span></td>
                      </tr>
                      <tr>
                        <td>truck</td>
                        <td><span id="truck"></span></td>
                      </tr>
                      <tr>
                        <td>bike</td>
                        <td><span id="bike"></span></td>
                      </tr>
                      <tr>
                        <td>Rikshaw</td>
                        <td><span id="rikshaw"></span></td>
                      </tr>
                      <tr>
                        <tr>
                          <td>Van</td>
                          <td><span id="van"></span></td>
                        </tr>
                        <tr>
                        <td></td>
                        <td><span id="total"></span></td>
                      </tr>
                    </table>



                  </div>
                </div>
                <!-- /.card-body-->
              </div>
            </div>
            <!-- /.col -->
          </div>


        </div><!-- /.container-fluid -->
      </section>
      <!-- /.content -->
    </div>
    <!-- /.content-wrapper -->


    <!-- Control Sidebar -->
    <aside class="control-sidebar control-sidebar-dark">
    </aside>
    <!-- /.control-sidebar -->
  </div>
  <!-- ./wrapper -->

  <!-- jQuery -->
  <script src="static/plugins/jquery/jquery.min.js"></script>
  <!-- Bootstrap 4 -->
  <script src="static/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
  <!-- AdminLTE App -->
  <script src="static/js/adminlte.min.js"></script>
  <!-- FLOT CHARTS -->
  <script src="static/plugins/flot/jquery.flot.js"></script>
  <!-- FLOT RESIZE PLUGIN - allows the chart to redraw when the window is resized -->
  <script src="static/plugins/flot/plugins/jquery.flot.resize.js"></script>
  <!-- FLOT PIE PLUGIN - also used to draw donut charts -->
  <script src="static/plugins/flot/plugins/jquery.flot.pie.js"></script>
  <!-- AdminLTE for demo purposes -->
  <script src="static/js/demo.js"></script>
  <!-- Page specific script -->
  <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
  <script>

    setInterval(function () {
      var myimageelement = document.getElementById('myImage');
      myimageelement.src = "/static/img/output.jpg?rand=" + Math.random();

    }, 2500)
    function ShowCurrentTime() {
                // Ajax call to YOUR_PAGE.aspx/GetCurrentTime
                $.ajax({
                    type: "GET",
                    url: "/fetchtable", // Change Default.aspx to your ASPX page name, and GetCurrentTime to your server-side WebMethod name
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: OnSuccess // OnSuccess method is called when AJAX request receives the data from the server
                });
            }

            function OnSuccess(response) {
                // The response will contain JSON object like {"d":"29.6.2014 13:21:47"},
                // so the actual data is response.d
                $("#car").text(JSON.parse(response.Car));
                $("#bus").text(JSON.parse(response.Bus)); // Fill our SPAN label with the data. 
                $("#truck").text(JSON.parse(response.Truck));
                $("#bike").text(JSON.parse(response.Bike));
                $("#van").text(JSON.parse(response.Van));

                // $("#van").text(JSON.parse(response.Car));
                $("#rikshaw").text(JSON.parse(response.rikshaw));
                $("#total").text(JSON.parse(response.total));
            }

            $(function () {
                // Call every 1000 miliseconds
                window.setInterval(ShowCurrentTime, 8000);
            });

    // function parsedate(y, m, d, h, mi, s) {
    //   // var d = new Date()

    //   var d = new Date(y, m, d, h, mi, s)
    //   return d

    // }

    // window.onload = function () {
    //   var line_plot = []
    //   var chart = new CanvasJS.Chart("chartContainer", {
    //     animationEnabled: true,
    //     title: {
    //       text: "Traffic"
    //     },
    //     // axisX:{
    //     //   // includeZero: true,
    //     // 	// valueFormatString: "DD MMM"
    //     // },
    //     axisY: {
    //       includeZero: true,
    //       title: "Number of Vehicles"
    //       // scaleBreaks: {
    //       //   autoCalculate: true
    //       // }
    //     },
    //     data: [{
    //       type: "spline",
    //       xValueFormatString: "dd hh mm ss",
    //       // color: "#3c8dbc",
    //       dataPoints: line_plot
    //     }
    //     ]
    //   });
    //   chart.render();
      // chart.remove();
      // chart.destroy();


      // var updatechart = function (year, m, d, h, mi, s, y, checkflag) {
      //   if (line_plot.length == 0) {
      //     checkflag = false
      //   }
      //   if (checkflag == false) {
      //     console.log("false condition")
      //     console.log(line_plot)

      //     for (let i = 0; i < year.length; i++) {
      //       line_plot.push({
      //         x: parsedate(year[i], m[i], d[i], h[i], mi[i], s[i]), y: y[i]

      //       })
      //     }
      //   }
      //   else {
      //     ln = year.length - 1
      //     console.log("true condition")
      //     console.log(line_plot)
      //     line_plot.push({
      //       x: parsedate(year[ln], m[ln], d[ln], h[ln], mi[ln], s[ln]), y: y[ln]

      //     })

      //   }
      //   if (line_plot.length > 15) {
      //     line_plot.shift();
      //   }
      //   // chart.clear();
      //   chart.render();

      // }

    //   setInterval(function () {
    //     var myimageelement = document.getElementById('myImage');
    //     myimageelement.src = "/static/img/output.jpg?rand=" + Math.random();
    // }


    /*
     * Custom Label formatter
     * ----------------------
     */
    function labelFormatter(label, series) {
      return '<div style="font-size:13px; text-align:center; padding:2px; color: #fff; font-weight: 600;">'
        + label
        + '<br>'
        + Math.round(series.percent) + '%</div>'
    }






  </script>
</body>

</html>